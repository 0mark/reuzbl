Bugs:
  - The control_thread function doesn't receive data all the time, and causes segfaults for some reason.